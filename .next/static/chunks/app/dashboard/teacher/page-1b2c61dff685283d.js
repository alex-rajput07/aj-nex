(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[400],{5717:function(e,s,t){Promise.resolve().then(t.bind(t,5139))},5139:function(e,s,t){"use strict";var n=t(7437),a=t(2265),c=t(5346),i=t(4218),l=t(908);s.default=()=>{let e=(0,c.N)(),[s,t]=(0,a.useState)([]),[r,d]=(0,a.useState)(!1),[u,o]=(0,a.useState)(null),m=async()=>{d(!0);let{data:s,error:t}=await e.from("attendance").select("*, students(full_name)").order("date",{ascending:!1});t?o({message:"Error fetching attendance data",type:"error"}):o({message:"Attendance data loaded successfully",type:"success"}),d(!1)},h=async(s,t)=>{d(!0);let{error:n}=await e.from("attendance").insert([{student_id:s,date:new Date,is_present:t}]);n?o({message:"Error submitting attendance",type:"error"}):(o({message:"Attendance submitted successfully",type:"success"}),m()),d(!1)};return(0,a.useEffect)(()=>{m()},[]),(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h1",{className:"text-xl font-bold",children:"Real-Time Attendance"}),r&&(0,n.jsx)(i.Z,{}),u&&(0,n.jsx)(l.Z,{message:u.message,type:u.type}),(0,n.jsx)("div",{className:"mt-4",children:s.map(e=>(0,n.jsxs)("div",{className:"flex justify-between items-center p-2 border-b",children:[(0,n.jsx)("span",{children:e.full_name}),(0,n.jsx)("button",{onClick:()=>h(e.id,!0),className:"bg-green-500 text-white p-1 rounded",children:"Present"}),(0,n.jsx)("button",{onClick:()=>h(e.id,!1),className:"bg-red-500 text-white p-1 rounded",children:"Absent"})]},e.id))})]})}},908:function(e,s,t){"use strict";var n=t(7437);t(2265);var a=t(5669);s.Z=e=>{let{message:s,type:t}=e;return(0,n.jsxs)("div",{className:"flex items-center p-4 ".concat("success"===t?"bg-green-500":"bg-red-500"),children:["success"===t&&(0,n.jsx)(a.Z,{loop:!1,play:!0,src:"/lottie/checkmark.json",style:{width:40,height:40,marginRight:"1rem"}}),(0,n.jsx)("span",{className:"text-white",children:s})]})}},4218:function(e,s,t){"use strict";var n=t(7437);t(2265);var a=t(5669);s.Z=()=>(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,n.jsx)(a.Z,{loop:!0,src:"/lottie/loading.json",play:!0,style:{width:150,height:150}})})},5346:function(e,s,t){"use strict";t.d(s,{N:function(){return a}});let n=(0,t(9683).eI)("https://xuvyylpwmhnoyiklbcuo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh1dnl5bHB3bWhub3lpa2xiY3VvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwNzk2ODEsImV4cCI6MjA3NTY1NTY4MX0.aR7PHwf-QzlLIvScMbtzVJm9sAkwTLDhMYgtEwavnDM"),a=()=>n}},function(e){e.O(0,[705,683,669,971,117,744],function(){return e(e.s=5717)}),_N_E=e.O()}]);